<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Infliker Admin</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 p-6">
<div class="max-w-3xl mx-auto">
<h1 class="text-2xl font-bold mb-4">Infliker Admin</h1>


<div id="auth">
<h2 class="font-semibold">Login</h2>
<input id="email" class="border p-2 w-full mb-2" placeholder="email" />
<input id="password" type="password" class="border p-2 w-full mb-2" placeholder="password" />
<button id="login" class="bg-indigo-600 text-white px-4 py-2 rounded">Login</button>
</div>


<div id="app" style="display:none">
<h2 class="mt-6 font-semibold">Create Post</h2>
<input id="title" class="border p-2 w-full mb-2" placeholder="Title" />
<input id="slug" class="border p-2 w-full mb-2" placeholder="slug-friendly" />
<textarea id="content" class="border p-2 w-full mb-2" rows="8" placeholder="HTML content"></textarea>
<input id="excerpt" class="border p-2 w-full mb-2" placeholder="Excerpt" />
<button id="publish" class="bg-green-600 text-white px-4 py-2 rounded">Publish</button>
<div id="status" class="mt-3 text-sm text-gray-600"></div>
</div>
</div>


<script>
const apiBase = 'https://api.infliker.fun/api';
document.getElementById('login').onclick = async ()=>{
const email = document.getElementById('email').value;
const password = document.getElementById('password').value;
const res = await fetch(apiBase+'/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
if(res.ok){ document.getElementById('auth').style.display='none'; document.getElementById('app').style.display='block'; }
else alert('Login failed');
}
document.getElementById('publish').onclick = async ()=>{
const body = { title:document.getElementById('title').value, slug:document.getElementById('slug').value, content:document.getElementById('content').value, excerpt:document.getElementById('excerpt').value, published:true }
const res = await fetch(apiBase+'/posts',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body),credentials:'include'});
if(res.ok) document.getElementById('status').innerText='Published'; else document.getElementById('status').innerText='Error';
}
</script>
</body>
</html>
